{"title":"南京大学软件分析--PA","uid":"4063b5a2c98c833f090c95343895b35d","slug":"南京大学软件分析-PA","date":"2022-12-26T08:37:30.000Z","updated":"2022-12-26T09:23:46.364Z","comments":true,"path":"api/articles/南京大学软件分析-PA.json","keywords":null,"cover":[],"content":"<meta name=\"referrer\" content=\"no-referrer\"/>\n\n<p>B站教程地址：<a href=\"https://www.bilibili.com/video/BV1gg4y1z78p/?spm_id_from=pageDriver&amp;vd_source=6632b385bcaaeb6eb7c62e69b2587a3e\">https://www.bilibili.com/video/BV1gg4y1z78p/?spm_id_from=pageDriver&amp;vd_source=6632b385bcaaeb6eb7c62e69b2587a3e</a></p>\n<p>英文文档地址：<a href=\"https://pascal-group.bitbucket.io/lectures/PTA.pdf\">https://pascal-group.bitbucket.io/lectures/PTA.pdf</a></p>\n<p>Tai-e作业文档地址：<a href=\"https://tai-e.pascal-lab.net/intro/overview.html\">https://tai-e.pascal-lab.net/intro/overview.html</a></p>\n<p><strong>PA：Pointer  Analysis</strong></p>\n<h2 id=\"Motivation\"><a href=\"#Motivation\" class=\"headerlink\" title=\"Motivation\"></a>Motivation</h2><h3 id=\"Problem-of-CHA\"><a href=\"#Problem-of-CHA\" class=\"headerlink\" title=\"Problem of CHA\"></a>Problem of CHA</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672035193326-05c6164f-443f-4403-8dac-d7b330825d3e.png?x-oss-process=image/resize,w_937,limit_0\" alt=\"image.png\"></p>\n<p>用前面学的CHA算法分析n.get()调用，会得到NAC的结果。然而，事实上只会调用One的get()方法，会返回1。所以这个结果是不准确的。</p>\n<h3 id=\"Via-Pointer-Analysis\"><a href=\"#Via-Pointer-Analysis\" class=\"headerlink\" title=\"Via Pointer Analysis\"></a>Via Pointer Analysis</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672035393656-58dfa4f5-6a2a-4c7d-887a-cc885092c515.png?x-oss-process=image/resize,w_937,limit_0\" alt=\"image.png\"></p>\n<p>因为CHA算法只考虑声明类型，所以得到的结果不准确。而指针分析则会考虑实际的类型，也就是new One()。所以会得到精确的结果。这就是为什么需要指针分析。</p>\n<h2 id=\"Introduction-to-Pointer-Analysis\"><a href=\"#Introduction-to-Pointer-Analysis\" class=\"headerlink\" title=\"Introduction to Pointer Analysis\"></a>Introduction to Pointer Analysis</h2><h3 id=\"Pointer-Analysis\"><a href=\"#Pointer-Analysis\" class=\"headerlink\" title=\"Pointer Analysis\"></a>Pointer Analysis</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672035764967-e626b67b-dc2d-4882-b67b-15c4711f8c5b.png?x-oss-process=image/resize,w_937,limit_0\" alt=\"image.png\"></p>\n<ol>\n<li><p>静态分析的基础：<br>计算内存中指针的指向</p>\n</li>\n<li><p>对于如Java一样的oop语言</p>\n<p>计算对象的指针（变量和filed）的指向</p>\n</li>\n<li><p>被视为是may-analysis</p>\n<p>计算指针可以指向哪些对象</p>\n</li>\n</ol>\n<p>后面是一篇论文，提出关于指针分析，也是为了处理过程间分析的问题。</p>\n<h4 id=\"Example\"><a href=\"#Example\" class=\"headerlink\" title=\"Example\"></a>Example</h4><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672036006506-ec001c80-9d40-4bb6-8363-b5ed82020176.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672036050518-e775cde3-613c-4353-b69d-09756c524fba.png\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672036075525-3cc686e6-0d8a-4612-87f9-124e54f5263a.png\" alt=\"image.png\"></p>\n<p>指针分析处理的是这些调用发生时，对象和field的指针指向</p>\n<h3 id=\"Pointer-Analysis-and-Alias-Analysis\"><a href=\"#Pointer-Analysis-and-Alias-Analysis\" class=\"headerlink\" title=\"Pointer Analysis and Alias Analysis\"></a>Pointer Analysis and Alias Analysis</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672036561578-cf01367c-5bdc-4ea4-b3cf-6e3365a9b39f.png\" alt=\"image.png\"></p>\n<p>指针分析：对象指针的指向</p>\n<p>别名分析：两个指针指向同一个对象</p>\n<p>下面是别名分析的一个列子</p>\n<p>别名信息是能够通过指针分析的结果得出来的</p>\n<h3 id=\"Applications-of-Pointer-Analysis\"><a href=\"#Applications-of-Pointer-Analysis\" class=\"headerlink\" title=\"Applications of Pointer Analysis\"></a>Applications of Pointer Analysis</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672036703366-9507af19-17e4-4e2a-9f81-e64dc46c8188.png?x-oss-process=image/resize,w_937,limit_0\" alt=\"image.png\"></p>\n<p><strong>指针分析的应用：</strong></p>\n<ol>\n<li><p>基础信息：</p>\n<p>调用图，别名等</p>\n</li>\n<li><p>编译优化：<br>虚拟调用内联等</p>\n</li>\n<li><p>检查bug：<br>空指针检查等</p>\n</li>\n<li><p>安全分析：</p>\n<p>信息流分析等</p>\n</li>\n<li><p>等等更多</p>\n</li>\n</ol>\n<p>指针分析可以说是静态分析的最基础，几乎所有其他的分析都建立在指针分析的基础上。</p>\n<h2 id=\"Key-Factors-of-Pointer-Analysis\"><a href=\"#Key-Factors-of-Pointer-Analysis\" class=\"headerlink\" title=\"Key Factors of Pointer Analysis\"></a>Key Factors of Pointer Analysis</h2><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672037141109-670a9e11-dd4f-4022-8690-e382e6610ee6.png?x-oss-process=image/resize,w_937,limit_0\" alt=\"image.png\"></p>\n<p>四个要素，都解决了某一个问题，都是一个分析方向。</p>\n<h3 id=\"Heap-Abstraction\"><a href=\"#Heap-Abstraction\" class=\"headerlink\" title=\"Heap Abstraction\"></a>Heap Abstraction</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672037279671-00e70b2c-96ac-47c0-94c7-1faf647c998c.png\" alt=\"image.png\"></p>\n<p>如何对堆进行建模？</p>\n<ol>\n<li>在动态执行过程中，由于循环和递归，堆对象的数量可以是无限的</li>\n<li>为了确保终止，堆抽象模型将动态分配的无限具体对象作为静态分析的有限抽象对象</li>\n</ol>\n<p>这样有限的处理就可以终止</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672037563101-6404f22c-7b97-430c-9ae5-b419a97b0605.png?x-oss-process=image/resize,w_937,limit_0\" alt=\"image.png\"></p>\n<p>有两大流派：</p>\n<ol>\n<li>Store based model</li>\n<li>Storeless model</li>\n</ol>\n<p>下面的课程只学习1下面的Allocation sites技术</p>\n<p>因为这个技术是目前最有用的关于堆抽象的技术</p>\n<h4 id=\"Allocation-Site-Abstraction\"><a href=\"#Allocation-Site-Abstraction\" class=\"headerlink\" title=\"Allocation-Site Abstraction\"></a>Allocation-Site Abstraction</h4><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672037806379-f277ab4e-e1f8-4395-b1a3-94d601d05c8c.png\" alt=\"image.png\"></p>\n<p>用一个列子说明：在那个for循环动态执行的过程中，不停的创建一个A对象，我们直接将这些相同的具体对象抽象为一个对象</p>\n<p>因为在程序中这些具体的对象是有限的，所以抽象的对象必定是有限的。程序就能够终止。</p>\n<p><strong>就是代码中有几个new语句，静态分析时就处理几个抽象对象</strong></p>\n<h3 id=\"Context-Sensitivity\"><a href=\"#Context-Sensitivity\" class=\"headerlink\" title=\"Context Sensitivity\"></a>Context Sensitivity</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672038215061-216624fe-9c3b-42a7-9028-7b3f28effd82.png\" alt=\"image.png\"></p>\n<p>如何对上下文调用建模？</p>\n<p>上下文敏感性</p>\n<p><strong>上下文敏感</strong></p>\n<p>比如foo方法在两个地方调用，分成两个上下文。分别进行处理，实参x只会传入上下文1，实参y只会传入上下文2。</p>\n<p>同一个方法，根据上下文的不同，将其分开分析。</p>\n<p><strong>上下文不敏感</strong></p>\n<p>将同一个方法放在一起分析，这样会丢失精度</p>\n<h3 id=\"Flow-Sensitivity\"><a href=\"#Flow-Sensitivity\" class=\"headerlink\" title=\"Flow Sensitivity\"></a>Flow Sensitivity</h3><p>如何对控制流建模？</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672038801711-d73c8225-6823-4494-afc4-337161d2dd8d.png\" alt=\"image.png\"></p>\n<p>也是分为控制流敏感和不敏感</p>\n<p>从课程开始到现在学习的控制流分析都是属于敏感分析</p>\n<p>蓝色是指针分析基于流敏感的，另一个是指针分析基于流不敏感</p>\n<p>不敏感只会增加指针集，敏感则会删除一些指向</p>\n<p>对于Java这门语言，没有研究结果表明，流敏感比流不敏感的结果精确很多。所以，这门课学习流不敏感。</p>\n<h3 id=\"Analysis-Scope\"><a href=\"#Analysis-Scope\" class=\"headerlink\" title=\"Analysis Scope\"></a>Analysis Scope</h3><p>应该分析程序的那些部分？</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672039949947-61961162-b374-428a-a63a-9a8dc865cb5b.png\" alt=\"image.png\"></p>\n<p>分为整个程序全部分析和及分析具体的某些对象</p>\n<p>整体分析能处理所有可能的需求，特定分析只满足一些需求</p>\n<p>某些情况下，特定分析不会快过于整体分析</p>\n<p>这节课还学习整体分析。</p>\n<h2 id=\"Pointer-Analysis-in-This-Course\"><a href=\"#Pointer-Analysis-in-This-Course\" class=\"headerlink\" title=\"Pointer Analysis in This Course\"></a>Pointer Analysis in This Course</h2><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672040377258-5b427610-0b7d-46ce-80a1-9c31a811e6d3.png\" alt=\"image.png\"></p>\n<p>红色表示主流，所以学习这个。</p>\n<h2 id=\"Concerned-Statements\"><a href=\"#Concerned-Statements\" class=\"headerlink\" title=\"Concerned Statements\"></a>Concerned Statements</h2><h3 id=\"What-Do-We-Analysis\"><a href=\"#What-Do-We-Analysis\" class=\"headerlink\" title=\"What Do We Analysis\"></a>What Do We Analysis</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672040556964-8ae17be7-d160-4297-b758-1c7df3d28611.png\" alt=\"image.png\"></p>\n<p>只关注影响指针的语句，忽略其他不会影响指针的语句</p>\n<h3 id=\"Pointers-in-Java\"><a href=\"#Pointers-in-Java\" class=\"headerlink\" title=\"Pointers in Java\"></a>Pointers in Java</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672041085005-14f7ab10-5efc-4daf-b729-eb517590e283.png\" alt=\"image.png\"></p>\n<p>只学习1，3。2，4不直接学习，因为跟前一个的处理方式一样。</p>\n<h3 id=\"Pointer-Affecting-Statements\"><a href=\"#Pointer-Affecting-Statements\" class=\"headerlink\" title=\"Pointer-Affecting Statements ***\"></a>Pointer-Affecting Statements ***</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672041442509-210c44c9-1a53-4e2f-83b3-6d332df5197d.png\" alt=\"image.png\"></p>\n<p>上面的语句都是重点。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672041547194-e5b016cb-cec4-4b4b-b257-89719fe00c5a.png\" alt=\"image.png\"></p>\n<p>对于复杂的语句，会采用临时变量，将其简化为三地址码。</p>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2022/png/25696976/1672041564833-234f6de5-7d59-4163-a20f-1260ce81f9fd.png\" alt=\"image.png\"></p>\n<p>前面两种调用好处理。后面只学习vitrual call，也就是说下面学习的程序全是virtual call。</p>\n<h2 id=\"必会知识点：\"><a href=\"#必会知识点：\" class=\"headerlink\" title=\"必会知识点：\"></a>必会知识点：</h2><ol>\n<li>什么是指针分析</li>\n<li>理解影响指针分析的关键因素</li>\n<li>理解指针分析中需要分析的内容</li>\n</ol>\n","text":" B站教程地址：https://www.bilibili.com/video/BV1gg4y1z78p/?spm_id_from=pageDriver&amp;vd_source=6632b385bcaaeb6eb7c62e69b2587a3e 英文文档地址：https://pa...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"软件分析","slug":"软件分析","count":6,"path":"api/categories/软件分析.json"}],"tags":[{"name":"Java","slug":"Java","count":22,"path":"api/tags/Java.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Motivation\"><span class=\"toc-text\">Motivation</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Problem-of-CHA\"><span class=\"toc-text\">Problem of CHA</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Via-Pointer-Analysis\"><span class=\"toc-text\">Via Pointer Analysis</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Introduction-to-Pointer-Analysis\"><span class=\"toc-text\">Introduction to Pointer Analysis</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Pointer-Analysis\"><span class=\"toc-text\">Pointer Analysis</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Example\"><span class=\"toc-text\">Example</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Pointer-Analysis-and-Alias-Analysis\"><span class=\"toc-text\">Pointer Analysis and Alias Analysis</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Applications-of-Pointer-Analysis\"><span class=\"toc-text\">Applications of Pointer Analysis</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Key-Factors-of-Pointer-Analysis\"><span class=\"toc-text\">Key Factors of Pointer Analysis</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Heap-Abstraction\"><span class=\"toc-text\">Heap Abstraction</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Allocation-Site-Abstraction\"><span class=\"toc-text\">Allocation-Site Abstraction</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Context-Sensitivity\"><span class=\"toc-text\">Context Sensitivity</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Flow-Sensitivity\"><span class=\"toc-text\">Flow Sensitivity</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Analysis-Scope\"><span class=\"toc-text\">Analysis Scope</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Pointer-Analysis-in-This-Course\"><span class=\"toc-text\">Pointer Analysis in This Course</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Concerned-Statements\"><span class=\"toc-text\">Concerned Statements</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#What-Do-We-Analysis\"><span class=\"toc-text\">What Do We Analysis</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Pointers-in-Java\"><span class=\"toc-text\">Pointers in Java</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Pointer-Affecting-Statements\"><span class=\"toc-text\">Pointer-Affecting Statements ***</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BF%85%E4%BC%9A%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9A\"><span class=\"toc-text\">必会知识点：</span></a></li></ol>","author":{"name":"Longw","slug":"blog-author","avatar":"https://userblink.csdnimg.cn/20211213/qq_57037477/pic/7db9b5c05ba342a75ddf06eecf740949-0.jpg","link":"/","description":"一个不想开挂的安全实习生","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"南京大学软件分析--IA","uid":"7c0ae3fae65c1cc802990d3363df7f00","slug":"南京大学软件分析-IA","date":"2022-12-25T10:25:58.000Z","updated":"2022-12-26T08:38:33.044Z","comments":true,"path":"api/articles/南京大学软件分析-IA.json","keywords":null,"cover":[],"text":" B站教程地址：https://www.bilibili.com/video/BV1GQ4y1T7zm/?spm_id_from=pageDriver&amp;vd_source=6632b385bcaaeb6eb7c62e69b2587a3e 英文文档地址：https://pa...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"软件分析","slug":"软件分析","count":6,"path":"api/categories/软件分析.json"}],"tags":[{"name":"Java","slug":"Java","count":22,"path":"api/tags/Java.json"}],"author":{"name":"Longw","slug":"blog-author","avatar":"https://userblink.csdnimg.cn/20211213/qq_57037477/pic/7db9b5c05ba342a75ddf06eecf740949-0.jpg","link":"/","description":"一个不想开挂的安全实习生","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}